# 기술 구조

## 암호화

### 기본 원리의 이해

> Alice와 Bob은 같은 학급의 친한 친구인데, 어느날 전화 통화를 하던 중 내기를 하기로 하였다. Alice는 전화번호부에서 "02-1234-5678" 번호가 포함되어 있는 페이지가 홀수인지 짝수인지 맞추면 이기는 게임을 제안하였다. Bob이 "홀수"라고 말하자 Alice는 그 번호가 Joe의 것임을 알려주고, Bob은 전화번호부에서 정답을 확인할 수 있다.

위의 예는 각단하지만 암호 시스템에 대한 전반적인 시나리오를 표현하고 있다. 안전하지 않은 통신 채널, 평문, 암호화문, 시드와 같은 개념이 잘 표현되어 있다. 현대의 암호화 기술은 좀더 복잡한 형태이지만 기본적으로 평문과 키를 입력받아 암화화하는 함수와 암호와 키를 받아 복호화하는 함수로 요약할 수 있다.

### 대칭키와 비대칭키

암호화 함수와 복호화 함수에 사용되는 키가 동일한 경우 이를 대칭키라고 하고, 각각의 함수에 사용되는 키가 서로 다른 경우를 비대칭키라고 한다. 대칭키보다는 비대칭키의 활용도가 높아 비대칭키를 활용한 암호화 기술이 많이 쓰인다. 비대칭키 쌍에서 하나의 키\(개인키\)는 소유자만 가지고, 다른 하나의 키\(공개키\)는 모두가 접근할 수 있도록 한다. 비대칭키를 사용한 대표적인 활용은 다음과 같다.

#### 문서 암호화

문서의 내용을 다른 사람이 보지 못하게하고 해당 사용자만 볼 수 있게하려면 해당 사용자가 발급한 공개키로 암호화하면 이를 복호화할 수 있는 사람은 개인키를 가진 사람만이 볼 수 있다.

#### 인증/전자서명

문서의 내용을 개인키로 암호화하면, 공개키를 가진 누구나 볼 수 있지만 개인키를 가진 사람만이 그 암호문을 만들 수 있으므로 문서 작성자를 인증하게 된다.

## 키저장소

개인키는 디지털 세상에서 자신을 나타내는 것이므로 보관에 주의해야 한다. 이를 위해 다양한 형태의 키저장소가 존재한다. 키저장소는 개인키를 가지고 있으며, 원칙적으로 외부로 전달되지 않고, 키를 사용해 할 수 있는 다양한 기능을 수행한 후 그 결과만을 전달하는 API라고 이해하면 좋다. 여기에서는 Android에서 제공되는 AndroidKeyStore라는 키저장소를 사용해서 개인키를 보관한다. 자세한 내용은 다음 링크를 확인할 수 있다.

* [https://developer.android.com/training/articles/keystore.html](https://developer.android.com/training/articles/keystore.html)

## 지문 인증

지문인증은 인증도구 중에 하나로 패스워드 인증을 대체할 수 있다. 본 모듈에서는 지문 인증 모듈을 통해 개인 인증을 수행하여 키저장소 접근 권한을 얻고 해당 개인키를 얻어오게 된다. 만일, 패스워드를 사용할 경우라면 패스워드 인증으로 키저장소에 저장된 키의 접근 권한을 얻어야 한다.

## MVC 모델

인증 모듈은 지문 인증을 사용해서 키를 얻어오는 모델과 지문 인증을 위한 화면\(DialogFragment\)을 제공한다. 보통의 경우, 어플리케이션의 룩&필을 맞추기 위해 지문 인증 화면을 수정해야 하야만 하는 경우가 빈번하기 때문에 모델과 화면간의 의존성이 없도록 만들어져 있다. 또한, 지문 인증 과정의 예외 처리도 사용자 요구에 따라 달라지기 때문에 직접 변경이 가능하다.

